{"version":3,"sources":["webpack://wsc/webpack/universalModuleDefinition","webpack://wsc/webpack/bootstrap","webpack://wsc/./lib/WscError.js","webpack://wsc/./lib/Wsc.js","webpack://wsc/./index.js"],"names":["WscError","Error","Wsc","url","protocols","undefined","options","_url","_protocols","_options","useMessageQueue","reconnection","reconnectionOptions","attempts","Infinity","delay","maxDelay","increaseDelay","_webSocket","_binaryType","_extensions","_protocol","_standardEventQueue","_customEventQueue","_messageQueue","_reconnectionAttemptAt","Date","now","_currentAttempts","_currentReconnectionDelay","_defineEvents","window","WebSocket","error","message","forEach","item","addEventListener","event","_sendMessagesFromQueue","_executeCustomEvents","_addEventsFromStandardQueue","wasClean","currentTimestamp","timeoutTimestamp","reconnect","setTimeout","readyState","OPEN","close","connect","data","send","push","code","reason","_standardEvents","eventType","methodName","charAt","toUpperCase","slice","callback","call","_customEvents","value","index","queue","targetEventType","binaryType","bufferedAmount","extensions","protocol"],"mappings":"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","file":"wsc-1.0.0.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"wsc\"] = factory();\n\telse\n\t\troot[\"wsc\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","'use strict';\r\n\r\nclass WscError extends Error {\r\n\r\n}\r\n\r\nexport default WscError;","'use strict';\r\n\r\nimport WscError from './WscError.js';\r\n\r\nclass Wsc {\r\n\r\n    /**\r\n     * Создаёт экземпляр класса.\r\n     *\r\n     * @param {string} url URL-адрес для соединения\r\n     * @param {undefined|string|string[]} protocols протоколы\r\n     * @param {{}} options дополнительные опции\r\n     * @property {Function} onOpening метод для прослушивания процесса открытия соединения\r\n     * @property {Function} onOpen метод для прослушивания открытия соединения\r\n     * @property {Function} onReady метод для прослушивания готовности соединения\r\n     * @property {Function} onMessage метод для прослушивания сообщения\r\n     * @property {Function} onClosing метод для прослушивания процесса закрытия соединения\r\n     * @property {Function} onClose метод для прослушивания закрытия соединения\r\n     * @property {Function} onError метод для прослушивания ошибки\r\n     * @throws {WscError} ошибка указания параметров при создании экземпляра\r\n     */\r\n    constructor(url, protocols = undefined, options = {}) {\r\n\r\n        if (typeof url === 'undefined') {\r\n            throw new WscError('Required URL parameter is missing');\r\n        }\r\n\r\n        if (typeof options !== 'object') {\r\n            throw new WscError('Options is must be an object');\r\n        }\r\n\r\n        /**\r\n         * URL-адрес для соединения.\r\n         *\r\n         * @type {string}\r\n         * @private\r\n         */\r\n        this._url = url;\r\n\r\n        /**\r\n         * Протоколы.\r\n         *\r\n         * @type {string[]}\r\n         * @private\r\n         */\r\n        this._protocols = protocols;\r\n\r\n        /**\r\n         * Дополнительные опции.\r\n         *\r\n         * @type {{}}\r\n         * @private\r\n         */\r\n        this._options = {\r\n            ...{\r\n                useMessageQueue: true, // использование отправки сообщений из очереди (которые накопились при неактивном соединении)\r\n                reconnection: true, // использование переподключения\r\n                reconnectionOptions: { // опции переподключения\r\n                    attempts: Infinity, // количество попыток переподключения\r\n                    delay: 1000, // время задержки переподключения\r\n                    maxDelay: 5000, // максимальное время задержки переподключения\r\n                    increaseDelay: 1000, // время для увеличения задержки переподключения после каждой попытки\r\n                }\r\n            },\r\n            ...options,\r\n        };\r\n\r\n        /**\r\n         * Вебсокет.\r\n         *\r\n         * @type {undefined|WebSocket}\r\n         * @private\r\n         */\r\n        this._webSocket = undefined;\r\n\r\n        /**\r\n         * Тип двоичных данных.\r\n         *\r\n         * @type {undefined|string}\r\n         * @private\r\n         */\r\n        this._binaryType = undefined;\r\n\r\n        /**\r\n         * Расширения, выбранные сервером. В настоящее время это только пустая строка или список расширений,\r\n         * согласованных соединением.\r\n         *\r\n         * @type {undefined|string} расширения, выбранные сервером\r\n         * @private\r\n         */\r\n        this._extensions = undefined;\r\n\r\n        /**\r\n         * Строка, обозначающая имя подпротокола выбранного сервера.\r\n         *\r\n         * @type {undefined|string} строка, обозначающая имя подпротокола выбранного сервера\r\n         * @private\r\n         */\r\n        this._protocol = undefined;\r\n\r\n        /**\r\n         * Очередь стандартных событий.\r\n         *\r\n         * @type {{eventType: string, callback: Function}[]}\r\n         * @private\r\n         */\r\n        this._standardEventQueue = [];\r\n\r\n        /**\r\n         * Очередь кастомных событий.\r\n         *\r\n         * @type {{eventType: string, callback: Function}[]}\r\n         * @private\r\n         */\r\n        this._customEventQueue = [];\r\n\r\n        /**\r\n         * Очередь сообщений.\r\n         *\r\n         * @type {{string|ArrayBufferLike|Blob|ArrayBufferView}[]}\r\n         * @private\r\n         */\r\n        this._messageQueue = [];\r\n\r\n        /**\r\n         * Время последней попытки переподключения.\r\n         *\r\n         * @type {number}\r\n         * @private\r\n         */\r\n        this._reconnectionAttemptAt = Date.now();\r\n\r\n        /**\r\n         * Текущее количество попыток переподключения.\r\n         *\r\n         * @type {number}\r\n         * @private\r\n         */\r\n        this._currentAttempts = 0;\r\n\r\n        /**\r\n         * Текущее время задержки переподключения.\r\n         *\r\n         * @type {number}\r\n         * @private\r\n         */\r\n        this._currentReconnectionDelay = this._options.reconnectionOptions.delay;\r\n\r\n        // определение методов для прослушивания событий вебсокета\r\n        this._defineEvents();\r\n    }\r\n\r\n    /**\r\n     * Получает тип двоичных данных.\r\n     *\r\n     * @return {string} тип двоичных данных\r\n     */\r\n    get binaryType() {\r\n        if (this._webSocket instanceof window.WebSocket) {\r\n            return this._webSocket.binaryType;\r\n        } else if (typeof this._binaryType !== 'undefined') {\r\n            return typeof this._binaryType;\r\n        } else {\r\n            return 'blob';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Устанавливает тип двоичных данных.\r\n     *\r\n     * @param {string} value тип двоичных данных\r\n     */\r\n    set binaryType(value) {\r\n        this._binaryType = value;\r\n        if (this._webSocket instanceof window.WebSocket) {\r\n            this._webSocket.binaryType = value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Получает количество байтов данных, которые были поставлены в очередь, используя вызовы send(),\r\n     * но ещё не переданные в сеть.\r\n     */\r\n    get bufferedAmount() {\r\n        return (this._webSocket instanceof window.WebSocket)\r\n            ? this._webSocket.bufferedAmount\r\n            : 0;\r\n    }\r\n\r\n    /**\r\n     * Получает расширения, выбранные сервером.\r\n     *\r\n     * @return {string} расширения, выбранные сервером\r\n     */\r\n    get extensions() {\r\n        if (this._webSocket instanceof window.WebSocket) {\r\n            return this._webSocket.extensions;\r\n        } else if (typeof this._extensions !== 'undefined') {\r\n            return typeof this._extensions;\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Устанавливает расширения, выбранные сервером.\r\n     *\r\n     * @param {string} value расширения, выбранные сервером\r\n     */\r\n    set extensions(value) {\r\n        this._binaryType = extensions;\r\n        if (this._webSocket instanceof window.WebSocket) {\r\n            this._webSocket.extensions = value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Получает расширения, выбранные сервером\r\n     *\r\n     * @return {string} расширения, выбранные сервером\r\n     */\r\n    get protocol() {\r\n        if (this._webSocket instanceof window.WebSocket) {\r\n            return this._webSocket.protocol;\r\n        } else if (typeof this._protocol !== 'undefined') {\r\n            return typeof this._protocol;\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Устанавливает расширения, выбранные сервером\r\n     *\r\n     * @param {string} value расширения, выбранные сервером\r\n     */\r\n    set protocol(value) {\r\n        this._protocol = value;\r\n        if (this._webSocket instanceof window.WebSocket) {\r\n            this._webSocket.extensions = value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Получает текущее состояние подключения.\r\n     *\r\n     * @return {number} текущее состояние подключения\r\n     */\r\n    get readyState() {\r\n        return (this._webSocket instanceof window.WebSocket) ? this._webSocket.readyState : 0;\r\n    }\r\n\r\n    /**\r\n     * Получает URL-адрес для соединения.\r\n     *\r\n     * @return {string} URL-адрес для соединения\r\n     */\r\n    get url() {\r\n        return (this._webSocket instanceof window.WebSocket) ? this._webSocket.url : this._url;\r\n    }\r\n\r\n    /**\r\n     * Получает стандартные типы событий вебсокета.\r\n     *\r\n     * @return {string[]} стандартные типы событий вебсокета\r\n     * @private\r\n     */\r\n    get _standardEvents() {\r\n        return ['open', 'message', 'close', 'error'];\r\n    }\r\n\r\n    /**\r\n     * Получает кастомные типы событий вебсокета.\r\n     *\r\n     * @return {string[]} кастомные типы событий вебсокета\r\n     * @private\r\n     */\r\n    get _customEvents() {\r\n        return ['opening', 'closing', 'ready'];\r\n    }\r\n\r\n    /**\r\n     * Устанавливает соединение.\r\n     */\r\n    connect() {\r\n        // создание объекта для управление вебсокет-соединением\r\n        try {\r\n            this._webSocket = new window.WebSocket(this._url, this._protocols);\r\n        } catch (error) {\r\n            throw new WscError(error.message);\r\n        }\r\n\r\n        // установка свойств\r\n        ['binaryType', 'extensions', 'protocol'].forEach(item => {\r\n            if (typeof this['_' + item] !== 'undefined') {\r\n                this._webSocket[item] = this[item]\r\n            }\r\n        });\r\n\r\n        // выполнение отправки отложенных сообщений\r\n        this._webSocket.addEventListener('open', (event) => {\r\n            this._currentAttempts = 0;\r\n            this._currentReconnectionDelay = this._options.reconnectionOptions.delay;\r\n            this._sendMessagesFromQueue();\r\n            this._executeCustomEvents('ready', event);\r\n        });\r\n\r\n        // добавление и выполнение событий\r\n        this._executeCustomEvents('opening');\r\n        this._addEventsFromStandardQueue();\r\n\r\n        // выполнение автоматического переподключения соединения\r\n        if (this._options.reconnection) {\r\n            this._webSocket.addEventListener('close', (event) => {\r\n                if (!event.wasClean && (this._currentAttempts < this._options.reconnectionOptions.attempts)) {\r\n                    let currentTimestamp = Date.now();\r\n                    let timeoutTimestamp = this._currentReconnectionDelay - (currentTimestamp - this._reconnectionAttemptAt);\r\n                    if (timeoutTimestamp < 0) {\r\n                        this.reconnect();\r\n                    } else {\r\n                        setTimeout(() => {\r\n                            this.reconnect();\r\n                        }, timeoutTimestamp);\r\n                    }\r\n                    this._currentAttempts ++;\r\n                    this._currentReconnectionDelay += this._options.reconnectionOptions.increaseDelay;\r\n                    if (this._currentReconnectionDelay > this._options.reconnectionOptions.maxDelay) {\r\n                        this._currentReconnectionDelay = this._options.reconnectionOptions.maxDelay;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Переоткрывает соединение если оно было открыто первоначально.\r\n     *\r\n     * @throws {WscError} ошибка проверки типа объекта для управление вебсокет-соединением\r\n     */\r\n    reconnect() {\r\n        if (!(this._webSocket instanceof window.WebSocket)) {\r\n            throw new WscError('WebSocket instance is not defined');\r\n        } else {\r\n            this._reconnectionAttemptAt = Date.now();\r\n            if (this._webSocket.readyState === window.WebSocket.OPEN) {\r\n                this._webSocket.close();\r\n            }\r\n            this.connect();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Передаёт данные на сервер.\r\n     *\r\n     * @param {string|ArrayBufferLike|Blob|ArrayBufferView} data данные\r\n     */\r\n    send(data) {\r\n        if (this._webSocket instanceof window.WebSocket && this._webSocket.readyState === window.WebSocket.OPEN) {\r\n            this._webSocket.send(data);\r\n        } else if (this._options.useMessageQueue) {\r\n            this._messageQueue.push(data);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Закрывает соединние.\r\n     *\r\n     * @param {number} code код закрытия\r\n     * @param {string} reason описание закрытия\r\n     */\r\n    close(code = 1000, reason) {\r\n        this._executeCustomEvents('closing');\r\n        this._messageQueue = [];\r\n        this._standardEventQueue = [];\r\n        this._customEventQueue = [];\r\n        if (this._options.reconnection) {\r\n            this._currentAttempts = this._options.reconnectionOptions.attempts;\r\n        }\r\n        try {\r\n            this._webSocket.close(code, reason);\r\n        } catch (error) {\r\n            throw new WscError(error.message);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Определяет методы для прослушивания событий вебсокета.\r\n     *\r\n     * @private\r\n     */\r\n    _defineEvents() {\r\n\r\n        // определение стандартных событий\r\n        this._standardEvents.forEach(eventType => {\r\n            let methodName = 'on' + eventType.charAt(0).toUpperCase() + eventType.slice(1);\r\n            this[methodName] = (callback) => {\r\n                if (this._webSocket instanceof window.WebSocket) {\r\n                    this._webSocket.addEventListener(eventType, (event) => {\r\n                        callback.call(this, eventType, event);\r\n                    });\r\n                }\r\n                this._standardEventQueue.push({\r\n                    eventType: eventType,\r\n                    callback: callback,\r\n                });\r\n            };\r\n        });\r\n\r\n        // определение кастомных событий\r\n        this._customEvents.forEach(eventType => {\r\n            let methodName = 'on' + eventType.charAt(0).toUpperCase() + eventType.slice(1);\r\n            this[methodName] = (callback) => {\r\n                this._customEventQueue.push({\r\n                    eventType: eventType,\r\n                    callback: callback,\r\n                });\r\n            };\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Устанавливает события из очереди стандратных событий.\r\n     *\r\n     * @private\r\n     */\r\n    _addEventsFromStandardQueue() {\r\n        this._standardEventQueue.forEach((value, index, queue) => {\r\n            let {eventType, callback} = value;\r\n            this._webSocket.addEventListener(eventType, (event) => {\r\n                callback.call(this, eventType, event);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Выполняет события кастомные события.\r\n     *\r\n     * @param {string} targetEventType тип события\r\n     * @param {Event} event событие\r\n     * @private\r\n     */\r\n    _executeCustomEvents(targetEventType, event = null) {\r\n        this._customEventQueue.forEach((value, index, queue) => {\r\n            let {eventType, callback} = value;\r\n            if (targetEventType === eventType) {\r\n                callback.call(this, eventType, event);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Отправляет сообщения из очереди.\r\n     *\r\n     * @private\r\n     */\r\n    _sendMessagesFromQueue() {\r\n        this._messageQueue.forEach((value, index, queue) => {\r\n            if (this._webSocket.readyState === window.WebSocket.OPEN) {\r\n                this.send(value);\r\n                delete queue[index];\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport default Wsc;","'use strict';\r\n\r\nimport Wsc from './lib/Wsc.js';\r\n\r\nexport default Wsc;"],"sourceRoot":""}